From 29998d9121d546d184fc551ed19c69cfb533ebd3 Mon Sep 17 00:00:00 2001
From: Kevin Mckee <kxzxxx@gmail.com>
Date: Mon, 21 Aug 2017 02:55:18 +0000
Subject: [PATCH 1/4] [PATCH] force return LEGACY api for com.oneplus.camera

Signed-off-by: joshuous <joshuous@gmail.com>
---
 core/java/android/hardware/camera2/CameraCharacteristics.java | 7 +++++++
 1 file changed, 7 insertions(+)

diff --git a/core/java/android/hardware/camera2/CameraCharacteristics.java b/core/java/android/hardware/camera2/CameraCharacteristics.java
index 2aa6af6..ca8548e 100644
--- a/core/java/android/hardware/camera2/CameraCharacteristics.java
+++ b/core/java/android/hardware/camera2/CameraCharacteristics.java
@@ -26,6 +26,7 @@ import android.util.Rational;
 
 import java.util.Collections;
 import java.util.List;
+import android.app.ActivityThread;
 
 /**
  * <p>The properties describing a
@@ -185,6 +186,12 @@ public final class CameraCharacteristics extends CameraMetadata<CameraCharacteri
      */
     @Nullable
     public <T> T get(Key<T> key) {
+        if(key == INFO_SUPPORTED_HARDWARE_LEVEL){
+            String packageName = ActivityThread.currentOpPackageName();
+            if(packageName.equals("com.oneplus.camera")){
+                return (T)new Integer(0x2);
+            }
+        }
         return mProperties.get(key);
     }
 
-- 
2.7.4

